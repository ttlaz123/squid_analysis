<!DOCTYPE html>

<head>
    <meta charset="utf-8">
    <title>Device Current Squid Tuning Analysis</title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
    </script>
    <script type="text/javascript" src="./mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
    <!-- Add my custom pa>er script -->
    <script type="text/javascript" src="scripts/pager.js"></script>
    <link rel="stylesheet" type="text/css" href="scripts/pager.css">

    <header>
        <h1>>Device Current Squid Tuning Analysis</h1>

        <time datetime="2023-05-25" class="published updated">
            2023 May 25
        </time> â€”
        Tom Liu, Cheng Zhang
    </header>

    <hr>
    <div class="header">
        <div class="header-right">
            <a class="active" href="index.html">Home</a>
            <a href="http://bicep.rc.fas.harvard.edu/bicep_array/analysis_logbook/">Back To BA Analysis Logbook</a>
        </div>
    </div>
    <section>
        <h2>Introduction</h2>
        While performing comparisons of
        <a href="http://bicep.rc.fas.harvard.edu/bicep_array/analysis_logbook/20230301_squid_screening/"> squid
            screening data </a>
        with the recent squid tuning data from
        <a href="http://bicep.rc.fas.harvard.edu/bicep_array/analysis_logbook/20230412_L9_squid_tunning/"> L9</a> and
        <a href="http://bicep.rc.fas.harvard.edu/bicep_array/analysis_logbook/20230413_L11_squid_tuning/"> L11</a>,
        it has come to our attention that relying solely on bias current may lead to mistakenly discarding functional
        SQUID chips. To address this concern, we explore the alternative of measuring device current. By
        assessing the current directly flowing through the chips rather than the total current passing through
        the MCEs, we can obtain a better understanding of cross talk in
        SQUID columns. In this posting, we compare the use of bias current and device current for cross talk analysis.

    </section>
    <section>
        <h2>
            Bias Current vs Device Current
        </h2>
        <p>
            As explained in
            <a href="http://bicep.rc.fas.harvard.edu/bicep_array/analysis_logbook/20230524_Squid_tuning_procedure/">
                Thibault's recent posting</a>,
            the current flowing through the squid chips depends on whether any row select switch is turned on.
            For a fixed bias current, the device current is higher when all the row selects are turned off, in
            comparison
            to when any row select is turned on. This can be seen in Figure 2.2, where the green/light blue line (row
            select
            off)
            is consistently higher than the red/blue lines (row selects on).
        </p>
        <p>
            To understand this behavior, we consider the squid circuit in Figure 2.1. Bias current flows in
            and out the points marked by SQ1BIAS. The entire circuit can be treated as a parallel circuit
            with three components, \(R_{shunt}\), \(R_{para}\), and \(R_{squid}\), where \(R_{squid}\) is the effective
            resistance of
            the squid chip itself. For the sake of simplicity,
            we assume that \(R_{para}\) is negligible. The device current \(I_{dev}\) is given by
            $$I_{dev} + I_{shunt}= I_{bias}$$

            $$I_{shunt}R_{shunt} = I_{dev} R_{squid}$$

            $$I_{dev} = \frac{I_{bias}}{1+R_{squid}/R_{shunt}}$$

        </p>
        <p>
            When all the row select switches are turned off, the squid chip is nominally superconducting, so the
            effective resistance \(R_{squid}\) is close to zero. In this case, the majority of the bias current
            flows through the chip, so \(I_{dev} = I_{bias}\). In reality, \(R_{para}\) is approximately a fifth
            of \(R_{shunt}\), so the actual relation is roughly \(I_{dev} \approx 0.85 I_{bias}\)
        </p>
        <p>
            However, when a row select is on, at least one of the switches is no longer superconducting, which
            increases the resistance of the squid chip to at least \(R_{series}\) (this value is approximately
            equal to \(R_{shunt}\) according to <a href="https://ieeexplore.ieee.org/document/8665919">
                NIST</a>).
        </p>
        <figure>
            <img alt="Squid Circuit Schematic" id="circuit" src="circuit.jpg" />
            <figcaption>

            </figcaption>
        </figure>

        <figure>
            <img alt="Tuning column" id="col" src="#" onerror="javascript:this.src='dne.png'" />
            <figcaption>

            </figcaption>
            <script type="text/javascript">
                function pad(num, size) {
                    num = num.toString();
                    while (num.length < size) num = "0" + num;
                    return num;
                }
                const rows = [];
                const cols = [];
                startcols = 0
                numrows = 41
                numcols = 32
                for (let i = 0; i < numrows; i++) {
                    s = pad(i, 1);

                    rows[i] = s.concat('|', s);

                }

                for (let i = startcols; i < numcols; i++) {
                    s = pad(i, 1);

                    cols[i - startcols] = s.concat('|', s);

                }
                rows[numrows] = 'Summary'
                pager.link("#col",
                    {

                        'Col|col': cols,
                        'Row|row': rows,
                        'Run|run': [
                            'Before Warmup|1683651057',
                            'After Warmup and RF shielding|1684269423',

                        ],
                        'Units|units': [
                            'Microamps (warning, calibration may not be correct)|uA',
                            'DAC|dac'
                        ]
                        /*
                        'Run Name|run': [
                            'LC_dark_FPU_250mK_datamode1_run1|LC_dark_FPU_250mK_datamode1_run1',
                            'LC_dark_FPU_250mK_datamode1_run2|LC_dark_FPU_250mK_datamode1_run2',
                            'Both|LC_dark_FPU_250mK_datamode1_run1__LC_dark_FPU_250mK_datamode1_run2'
                        ]
                        */
                    },
                    function (params) {
                        ctime = params.run
                        if (params.row == 'Summary') {
                            row = '_summary'
                        } else {
                            row = '_row' + params.row
                        }
                        units = params.units;
                        if (units == 'uA') {
                            units = 'ua';
                        }
                        name = "./output_data/" + ctime + '_icminmax_units' + units + row + '_col' +
                            params.col + '.png';
                        console.log(name);
                        return name;


                    });
                pager.setparams(
                    {
                        'col': '0',
                        'row': 'Summary',
                        'run': '1683651057',
                        'units': 'dac'
                    }
                );

            </script>

        </figure>


        <figure>
            <img alt="Grid" id="grid" src="#" onerror="javascript:this.src='dne.png'" />
            <figcaption>
                1684265643 - rowsel_servo_bias_ramp = 1

            </figcaption>
            <script type="text/javascript">
                pager.link("#grid",
                    {
                        'Run|run': [
                            'Before Warmup|1683651057',
                            'After Warmup and RF shielding|1684269423',

                        ],
                        'Value|val': [
                            '~~~~~~~~~~~~~~~~~~~~~~~~~~|',
                            'Ic_col|Ic_col',
                            'Ic_max|Ic_max',
                            'Best Possible Modulation|optmod',
                            'Manually Picked Modulation|manualmod',
                            'Optimal Bias|optbias',
                            'Crosstalk Bias|crosstalk',
                            'Ic_max-Ic_col|Ic_maxcol_diff',
                            'Optimal Bias - Crosstalk Bias|optbias_crosstalk_diff',
                            '~~~~~~~~~~~~~~~~~~~~~~~~~~|',
                        ],
                        'Units|units': [
                            'Microamps (warning, calibration may not be correct)|uA',
                            'DAC|dac'
                        ]

                    },
                    function (params) {
                        ctime = params.run
                        units = params.units;
                        if (units == 'dac') {
                            units = 'DAC';
                        }

                        name = "./output_data/" + ctime + '_' +
                            params.val + '_units' + units + '.png';
                        console.log(name);
                        return name;


                    });
                pager.setparams(
                    {
                        'val': 'Ic_maxcol_diff',
                        'run': '1684269423',
                        'units': 'dac'

                    }
                );

            </script>

        </figure>
    </section>
    <section>
        <h2>
            Appendix</h2>
        1684269423 - <br>
        sq1_servo_bias_ramp = 1, default_row_select is on,<br>
        sq1_servo_bias_start = 0;<br>
        sq1_servo_bias_count = 60;<br>
        sq1_servo_bias_step = 500;<br>
        1684272647 - <br>
        Now sq1_servo_bias_ramp = 1, default_row_select is off, <br>
        sq1_servo_bias_start = 0; <br>
        sq1_servo_bias_count = 60;<br>
        sq1_servo_bias_step = 500;<br>
        1683651057 - sq1 bias ramp (row selects on)<br>
        1683653428 - sq1 bias ramp (row select off)<br>
        <figure>
            <img alt="RS Servo Column" id="rs" src="#" onerror="javascript:this.src='dne.png'" />
            <figcaption>

            </figcaption>
            <script type="text/javascript">
                function pad(num, size) {
                    num = num.toString();
                    while (num.length < size) num = "0" + num;
                    return num;
                }
                cols1 = [];
                startcols = 0
                numrows = 41
                numcols = 32
                for (let i = 0; i < numrows; i++) {
                    s = pad(i, 1);

                    rows[i] = s.concat('|', s);

                }

                for (let i = startcols; i < numcols; i++) {
                    s = pad(i, 1);

                    cols1[i - startcols] = s.concat('|', s);

                }
                pager.link("#rs",
                    {

                        'Col|col': cols1,

                        'Run|run1': [
                            'Before Warmup, Row Select On|1683651057',
                            'Before Warmup, Row Select Off|1683653428',
                            'After Warmup, Row Select On|1684269423',
                            'After Warmup, Row Select Off|1684272647',

                        ]

                    },
                    function (params) {
                        ctime = params.run1
                        name = "./output_data/" + ctime + '_rsservo_rs_summary_col' +
                            params.col + '.png';
                        console.log(name);
                        return name;


                    });
                pager.setparams(
                    {
                        'col': '0',
                        'run1': '1684269423',

                    }
                );

            </script>

        </figure>
    </section>


</body>