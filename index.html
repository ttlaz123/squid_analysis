<!DOCTYPE html>

<head>
    <meta charset="utf-8">
    <title>Device Current Squid Tuning Analysis</title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
    <!-- Add my custom pa>er script -->
    <script type="text/javascript" src="scripts/pager.js"></script>
    <link rel="stylesheet" type="text/css" href="scripts/pager.css">

    <header>
        <h1>>Device Current Squid Tuning Analysis</h1>

        <time datetime="2023-05-25" class="published updated">
            2023 May 25
        </time> â€”
        Tom Liu, Cheng Zhang
    </header>

    <hr>


    <section>
        <figure>
            <img alt="Tuning column" id="col" src="#" onerror="javascript:this.src='dne.png'" />
            <figcaption>

            </figcaption>
            <script type="text/javascript">
                function pad(num, size) {
                    num = num.toString();
                    while (num.length < size) num = "0" + num;
                    return num;
                }
                const rows = [];
                const cols = [];
                startcols = 0
                numrows = 41
                numcols = 32
                for (let i = 0; i < numrows; i++) {
                    s = pad(i, 1);

                    rows[i] = s.concat('|', s);

                }

                for (let i = startcols; i < numcols; i++) {
                    s = pad(i, 1);

                    cols[i - startcols] = s.concat('|', s);

                }
                rows[numrows] = 'Summary'
                pager.link("#col",
                    {

                        'Col|col': cols,
                        'Row|row':rows,
                        'Run|run':[
                        'Before Warmup|1683651057',
                            'After Warmup and RF shielding|1684269423',
                            
                        ],
                        'Units|units':[
                            'Microamps (warning, calibration may not be correct)|uA',
                            'DAC|dac'
                        ]
                        /*
                        'Run Name|run': [
                            'LC_dark_FPU_250mK_datamode1_run1|LC_dark_FPU_250mK_datamode1_run1',
                            'LC_dark_FPU_250mK_datamode1_run2|LC_dark_FPU_250mK_datamode1_run2',
                            'Both|LC_dark_FPU_250mK_datamode1_run1__LC_dark_FPU_250mK_datamode1_run2'
                        ]
                        */
                    },
                    function (params) {
                        ctime = params.run
                        if(params.row == 'Summary'){
                            row = '_summary'
                        } else{
                            row = '_row' + params.row
                        }
                        name = "./output_data/" + ctime + '_icminmax_units' + params.units + row + '_col' +
                            params.col + '.png';
                        console.log(name);
                        return name;


                    });
                pager.setparams(
                    {
                        'col': '0',
                        'row':'Summary',
                        'run': '1683651057',
                        'units': 'dac'
                    }
                );

            </script>

        </figure>
        

        <figure>
            <img alt="Grid" id="grid" src="#" onerror="javascript:this.src='dne.png'" />
            <figcaption>
                1684265643 - rowsel_servo_bias_ramp = 1

            </figcaption>
            <script type="text/javascript">
                pager.link("#grid",
                    {
                        'Run|run': [
                        'Before Warmup|1683651057',
                            'After Warmup|1684269423',
                            
                        ],
                        'Value|val': [
                            'Ic_col|Ic_col',
                            'Ic_max|Ic_max',
                            'Best Possible Modulation|optmod',
                            'Manually Picked Modulation|manualmod',
                            'Optimal Bias|optbias',
                            'Crosstalk Bias|crosstalk',
                            'Ic_max-Ic_col|Ic_maxcol_diff',
                            'Optimal Bias - Crosstalk Bias|optbias_crosstalk_diff'
                        ],
                        'Units|units':[
                            'Microamps (warning, calibration may not be correct)|uA',
                            'DAC|dac'
                        ]

                    },
                    function (params) {
                        ctime = params.run
                        units = params.units;
                        if(units == 'dac'){
                            units = 'DAC';
                        }
                        name = "./output_data/" + ctime + '_' +
                            params.val + '_units' + params.units + '.png';
                        console.log(name);
                        return name;


                    });
                pager.setparams(
                    {
                        'val': 'Ic_col',
                        'run': '1684269423',
                        'units': 'dac'

                    }
                );

            </script>

        </figure>
    </section>
    <section>
        <h2>
        Appendix</h2>
        1684269423 - <br>
        sq1_servo_bias_ramp = 1, default_row_select is on,<br>
        sq1_servo_bias_start = 0;<br>
        sq1_servo_bias_count = 60;<br>
        sq1_servo_bias_step = 500;<br>
        1684272647 - <br>
        Now sq1_servo_bias_ramp = 1, default_row_select is off, <br>
        sq1_servo_bias_start = 0; <br>
        sq1_servo_bias_count = 60;<br>
        sq1_servo_bias_step = 500;<br>
        1683651057 - sq1 bias ramp (row selects on)<br>
        1683653428 - sq1 bias ramp (row select off)<br>
        <figure>
            <img alt="RS Servo Column" id="rs" src="#" onerror="javascript:this.src='dne.png'" />
            <figcaption>

            </figcaption>
            <script type="text/javascript">
                function pad(num, size) {
                    num = num.toString();
                    while (num.length < size) num = "0" + num;
                    return num;
                }
                cols1 = [];
                startcols = 0
                numrows = 41
                numcols = 32
                for (let i = 0; i < numrows; i++) {
                    s = pad(i, 1);

                    rows[i] = s.concat('|', s);

                }

                for (let i = startcols; i < numcols; i++) {
                    s = pad(i, 1);

                    cols1[i - startcols] = s.concat('|', s);

                }
                pager.link("#rs",
                    {

                        'Col|col': cols1,

                        'Run|run1': [
                        'Before Warmup, Row Select On|1683651057',
                            'Before Warmup, Row Select Off|1683653428',
                            'After Warmup, Row Select On|1684269423',
                            'After Warmup, Row Select Off|1684272647',
                            
                        ]

                    },
                    function (params) {
                        ctime = params.run1
                        name = "./output_data/" + ctime + '_rsservo_rs_summary_col' +
                            params.col + '.png';
                        console.log(name);
                        return name;


                    });
                pager.setparams(
                    {
                        'col': '0',
                        'run1': '1684269423',

                    }
                );

            </script>

        </figure>
    </section>


</body>